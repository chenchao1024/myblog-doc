<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.36" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://vuepress-theme-hope-v2-demo.mrhope.site/zh/posts/article/article3.html"><meta property="og:site_name" content="我的博客"><meta property="og:title" content="Redis"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:locale:alternate" content="en-US"><meta property="article:tag" content="tag A"><meta property="article:tag" content="tag B"><meta property="article:published_time" content="2022-01-03T00:00:00.000Z"><link rel="stylesheet" href="//at.alicdn.com/t/font_2410206_mfj6e1vbwo.css"><title>Redis | 我的博客</title><meta name="description" content="">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.b7b590a7.css">
    <link rel="modulepreload" href="/assets/app.276e6fe4.js"><link rel="modulepreload" href="/assets/article3.html.7c38fd46.js"><link rel="modulepreload" href="/assets/article3.html.a7ad9561.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc sidebar-open"><!--[--><header class="navbar"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><a href="/zh/" class="home-link"><!----><!----><span class="site-name hide-in-pad">我的博客</span><!--[--><!----><!--]--></a><nav class="nav-links" style=""><div class="nav-item hide-in-mobile"><a href="/zh/" class="nav-link" arialabel="首页"><i class="icon iconfont icon-home"></i>首页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/zh/home.html" class="nav-link" arialabel="项目主页"><i class="icon iconfont icon-home"></i>项目主页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/zh/guide/" class="nav-link" arialabel="指南"><i class="icon iconfont icon-creative"></i>指南<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" arialabel="博文"><span class="title"><i class="icon iconfont icon-edit"></i>博文</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>文章 1-4</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/zh/posts/article/article1.html" class="nav-link" arialabel="Docker学习"><i class="icon iconfont icon-edit"></i>Docker学习<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article2.html" class="nav-link" arialabel="ElacticSearch"><i class="icon iconfont icon-edit"></i>ElacticSearch<!----></a></li><li class="dropdown-subitem"><a aria-current="page" href="/zh/posts/article/article3.html" class="router-link-active router-link-exact-active nav-link active" arialabel="Redis学习"><i class="icon iconfont icon-edit"></i>Redis学习<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article4.html" class="nav-link" arialabel="SpringSecurity"><i class="icon iconfont icon-edit"></i>SpringSecurity<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>文章 5-12</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/zh/posts/article/article5.html" class="nav-link" arialabel="SpringCloud"><i class="icon iconfont icon-edit"></i>SpringCloud<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article6.html" class="nav-link" arialabel="网站跨域问题解决方法"><i class="icon iconfont icon-edit"></i>网站跨域问题解决方法<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article7.html" class="nav-link" arialabel="设计模式"><i class="icon iconfont icon-edit"></i>设计模式<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article8.html" class="nav-link" arialabel="Spring学习"><i class="icon iconfont icon-edit"></i>Spring学习<!----></a></li></ul></li><li class="dropdown-item"><a href="/zh/posts/article9.html" class="nav-link" arialabel="前端学习"><i class="icon iconfont icon-edit"></i>前端学习<!----></a></li><li class="dropdown-item"><a href="/zh/posts/article10.html" class="nav-link" arialabel="Swagger"><i class="icon iconfont icon-edit"></i>Swagger<!----></a></li><li class="dropdown-item"><a href="/zh/posts/article11.html" class="nav-link" arialabel="Java基础知识"><i class="icon iconfont icon-edit"></i>Java基础知识<!----></a></li><li class="dropdown-item"><a href="/zh/posts/article12.html" class="nav-link" arialabel="JavaScript"><i class="icon iconfont icon-edit"></i>JavaScript<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://vuepress-theme-hope.github.io/v2/zh/" rel="noopener noreferrer" target="_blank" arialabel="主题文档" class="nav-link"><i class="icon iconfont icon-note"></i>主题文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><div class="nav-actions-wrapper"><!--[--><!----><!--]--><div class="nav-item"><div class="dropdown-wrapper i18n-dropdown"><button class="dropdown-title" type="button" arialabel="选择语言"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewbox="0 0 1024 1024" arialabelledby="i18n" style="width:1rem;height:1rem;vertical-align:middle;"><title id="i18n" lang="en">i18n icon</title><g fill="currentColor"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></g></svg><!--]--><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/posts/article/article3.html" class="nav-link" arialabel="English"><!---->English<!----></a></li><li class="dropdown-item"><a aria-current="page" href="/zh/posts/article/article3.html" class="router-link-active router-link-exact-active nav-link active" arialabel="简体中文"><!---->简体中文<!----></a></li></ul></button></div></div><div class="nav-item"><a class="repo-link" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" arialabelledby="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><title id="github" lang="en">github icon</title><g fill="currentColor"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></g></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewbox="0 0 1024 1024" arialabelledby="outlook"><title id="outlook" lang="en">outlook icon</title><g fill="currentColor"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></g></svg><div class="outlook-dropdown"><!----></div></button></div><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button><!--[--><!----><!--]--></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/zh/" class="nav-link sidebar-link sidebar-page" arialabel="首页"><i class="icon iconfont icon-home"></i>首页<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/home.html" class="nav-link sidebar-link sidebar-page" arialabel="项目主页"><i class="icon iconfont icon-home"></i>项目主页<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/slide.html" class="nav-link sidebar-link sidebar-page" arialabel="幻灯片页"><i class="icon iconfont icon-slides"></i>幻灯片页<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading clickable"><i class="icon iconfont icon-creative"></i><a href="/zh/guide/" class="title">如何使用</a><!----></p><!--[--><!--[--><ul class="sidebar-links"><li><!--[--><a href="/zh/guide/" class="nav-link sidebar-link sidebar-page" arialabel="主要功能与配置演示"><i class="icon iconfont icon-creative"></i>主要功能与配置演示<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/guide/page.html" class="nav-link sidebar-link sidebar-page" arialabel="页面配置"><i class="icon iconfont icon-page"></i>页面配置<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/guide/markdown.html" class="nav-link sidebar-link sidebar-page" arialabel="Markdown 增强"><i class="icon iconfont icon-markdown"></i>Markdown 增强<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/guide/disable.html" class="nav-link sidebar-link sidebar-page" arialabel="组件禁用"><i class="icon iconfont icon-config"></i>组件禁用<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/guide/encrypt.html" class="nav-link sidebar-link sidebar-page" arialabel="密码加密的文章"><i class="icon iconfont icon-lock"></i>密码加密的文章<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--]--><!----><!--]--></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading active"><i class="icon iconfont icon-note"></i><span class="title">文章</span><!----></p><!--[--><!--[--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><i class="icon iconfont icon-note"></i><span class="title">文章 1-4</span><span class="arrow down"></span></button><!--[--><!--[--><ul class="sidebar-links"><li><!--[--><a href="/zh/posts/article/article1.html" class="nav-link sidebar-link sidebar-page" arialabel="Docker学习"><i class="icon iconfont icon-edit"></i>Docker学习<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/article/article2.html" class="nav-link sidebar-link sidebar-page" arialabel="ElacticSearch"><i class="icon iconfont icon-edit"></i>ElacticSearch<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/zh/posts/article/article3.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" arialabel="Redis"><i class="icon iconfont icon-edit"></i>Redis<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#nosql特点" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="NoSQL特点"><!---->NoSQL特点<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#vim编辑器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="vim编辑器"><!---->vim编辑器<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#账号管理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="账号管理"><!---->账号管理<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#磁盘管理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="磁盘管理"><!---->磁盘管理<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#redis启动和关闭" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="redis启动和关闭"><!---->redis启动和关闭<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#redis常用命令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="redis常用命令"><!---->redis常用命令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#redis五大基本数据类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="redis五大基本数据类型"><!---->redis五大基本数据类型<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#redis-key类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="Redis-key类型"><!---->Redis-key类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#string类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="string类型"><!---->string类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#list类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="List类型"><!---->List类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#set类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="Set类型"><!---->Set类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#hash类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="Hash类型"><!---->Hash类型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#zset类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="Zset类型"><!---->Zset类型<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#三种特殊数据类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="三种特殊数据类型"><!---->三种特殊数据类型<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#geospatial-地理空间" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="geospatial( 地理空间)"><!---->geospatial( 地理空间)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#hyperloglog-基数统计" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="Hyperloglog(基数统计)"><!---->Hyperloglog(基数统计)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#bitmaps-位存储" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="Bitmaps(位存储)"><!---->Bitmaps(位存储)<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#redis基本事务" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="Redis基本事务"><!---->Redis基本事务<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#监控" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="监控"><!---->监控<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#jedis" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="Jedis"><!---->Jedis<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#redis持久化" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="Redis持久化"><!---->Redis持久化<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#redis发布订阅" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="Redis发布订阅"><!---->Redis发布订阅<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#redis主从复制" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="Redis主从复制"><!---->Redis主从复制<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#哨兵模式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="哨兵模式"><!---->哨兵模式<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#缓存穿透与雪崩" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="缓存穿透与雪崩"><!---->缓存穿透与雪崩<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#缓存穿透-查不到" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="缓存穿透（查不到）"><!---->缓存穿透（查不到）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#缓存击穿-量太大-缓存过期" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="缓存击穿（量太大，缓存过期）"><!---->缓存击穿（量太大，缓存过期）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article3.html#缓存雪崩" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="缓存雪崩"><!---->缓存雪崩<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/zh/posts/article/article4.html" class="nav-link sidebar-link sidebar-page" arialabel="SpingSecurity"><i class="icon iconfont icon-edit"></i>SpingSecurity<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--]--><!----><!--]--></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><i class="icon iconfont icon-note"></i><span class="title">文章 5-12</span><!----></p><!--[--><!--[--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><i class="icon iconfont icon-note"></i><span class="title">文章 5-8</span><span class="arrow right"></span></button><!--[--><!--[--><!----><!--]--><!----><!--]--></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><i class="icon iconfont icon-note"></i><span class="title">文章 9-12</span><!----></p><!--[--><!--[--><ul class="sidebar-links"><li><!--[--><a href="/zh/posts/article9.html" class="nav-link sidebar-link sidebar-page" arialabel="前端汇总"><i class="icon iconfont icon-edit"></i>前端汇总<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/article10.html" class="nav-link sidebar-link sidebar-page" arialabel="Swagger"><i class="icon iconfont icon-edit"></i>Swagger<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/article11.html" class="nav-link sidebar-link sidebar-page" arialabel="/zh/posts/article11"><i class="icon iconfont icon-edit"></i>/zh/posts/article11<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/article12.html" class="nav-link sidebar-link sidebar-page" arialabel="JavaScript学习"><i class="icon iconfont icon-edit"></i>JavaScript学习<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--]--><!----><!--]--></section><!--]--></li></ul><!--]--><!----><!--]--></section><!--]--></li></ul><!--]--><!----><!--]--></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><i class="icon iconfont icon-edit"></i>Redis</h1><div class="article-info"><span class="author-info" arialabel="作者🖊" data-balloon-pos="down" isoriginal="false" pageview="false" color="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" arialabelledby="author"><title id="author" lang="en">author icon</title><g fill="currentColor"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></g></svg><span><a class="author-item" href="https://mrhope.site" target="_blank" rel="noopener noreferrer">小陈博客</a></span><span property="author" content="小陈博客"></span></span><!----><span class="date-info" arialabel="写作日期📅" data-balloon-pos="down" isoriginal="false" pageview="false" color="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" arialabelledby="calendar"><title id="calendar" lang="en">calendar icon</title><g fill="currentColor"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></g></svg><span>2022年1月3日</span><meta property="datePublished" content="2022-01-03T00:00:00.000Z"></span><span class="category-info" arialabel="分类🌈" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewbox="0 0 1024 1024" arialabelledby="category"><title id="category" lang="en">category icon</title><g fill="currentColor"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></g></svg><ul class="categories-wrapper"><li class="category category3 clickable" role="navigation">CategoryA</li><li class="category category3 clickable" role="navigation">CategoryB</li><meta property="articleSection" content="CategoryA,CategoryB"></ul></span><span arialabel="标签🏷" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewbox="0 0 1024 1024" arialabelledby="tag"><title id="tag" lang="en">tag icon</title><g fill="currentColor"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></g></svg><ul class="tags-wrapper"><li class="tag tag2 clickable" role="navigation">tag A</li><li class="tag tag8 clickable" role="navigation">tag B</li></ul><meta property="keywords" content="tag A,tag B"></span><span class="reading-time-info" arialabel="阅读时间⌛" data-balloon-pos="down" isoriginal="false" pageview="false" color="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" arialabelledby="timer"><title id="timer" lang="en">timer icon</title><g fill="currentColor"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></g></svg><span>大约 17 分钟</span><meta property="timeRequired" content="PT17M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc-list"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#nosql特点" class="router-link-active router-link-exact-active toc-link level2">NoSQL特点</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#vim编辑器" class="router-link-active router-link-exact-active toc-link level2">vim编辑器</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#账号管理" class="router-link-active router-link-exact-active toc-link level2">账号管理</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#磁盘管理" class="router-link-active router-link-exact-active toc-link level2">磁盘管理</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#redis启动和关闭" class="router-link-active router-link-exact-active toc-link level2">redis启动和关闭</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#redis常用命令" class="router-link-active router-link-exact-active toc-link level2">redis常用命令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#redis五大基本数据类型" class="router-link-active router-link-exact-active toc-link level2">redis五大基本数据类型</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#redis-key类型" class="router-link-active router-link-exact-active toc-link level3">Redis-key类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#string类型" class="router-link-active router-link-exact-active toc-link level3">string类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#list类型" class="router-link-active router-link-exact-active toc-link level3">List类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#set类型" class="router-link-active router-link-exact-active toc-link level3">Set类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#hash类型" class="router-link-active router-link-exact-active toc-link level3">Hash类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#zset类型" class="router-link-active router-link-exact-active toc-link level3">Zset类型</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#三种特殊数据类型" class="router-link-active router-link-exact-active toc-link level2">三种特殊数据类型</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#geospatial-地理空间" class="router-link-active router-link-exact-active toc-link level3">geospatial( 地理空间)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#hyperloglog-基数统计" class="router-link-active router-link-exact-active toc-link level3">Hyperloglog(基数统计)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#bitmaps-位存储" class="router-link-active router-link-exact-active toc-link level3">Bitmaps(位存储)</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#redis基本事务" class="router-link-active router-link-exact-active toc-link level2">Redis基本事务</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#监控" class="router-link-active router-link-exact-active toc-link level2">监控</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#jedis" class="router-link-active router-link-exact-active toc-link level2">Jedis</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#redis持久化" class="router-link-active router-link-exact-active toc-link level2">Redis持久化</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#redis发布订阅" class="router-link-active router-link-exact-active toc-link level2">Redis发布订阅</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#redis主从复制" class="router-link-active router-link-exact-active toc-link level2">Redis主从复制</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#哨兵模式" class="router-link-active router-link-exact-active toc-link level2">哨兵模式</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#缓存穿透与雪崩" class="router-link-active router-link-exact-active toc-link level2">缓存穿透与雪崩</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#缓存穿透-查不到" class="router-link-active router-link-exact-active toc-link level3">缓存穿透（查不到）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#缓存击穿-量太大-缓存过期" class="router-link-active router-link-exact-active toc-link level3">缓存击穿（量太大，缓存过期）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article3.html#缓存雪崩" class="router-link-active router-link-exact-active toc-link level3">缓存雪崩</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><!--[--><h1 id="redis" tabindex="-1"><a class="header-anchor" href="#redis" aria-hidden="true">#</a> Redis</h1><p>NoSQL概述 NoSQL=not only SQL(不仅仅是sql)</p><p>泛指非关系型数据库</p><p>关系型数据库：表格，行，列</p><h2 id="nosql特点" tabindex="-1"><a class="header-anchor" href="#nosql特点" aria-hidden="true">#</a> NoSQL特点</h2><p>1.方便扩展（数据之间没有关系，很好扩展）</p><p>2.大数据量高性能（Redis一秒读取8万次，读取11行）</p><p>3.数据类型是多样性的（不需要设计数据库）</p><p>4.传统RDBMS和NoSQL</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>传统的RDBMS
-结构化组织
SQL
-数据和关系都存在单独的表中
-严格的一致性
-基础事务
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Nosql
-不仅仅数数据
-没有固定的查询语句
-键值对存储，列存储，文档存储，图形数据库
-最终一致性
-CAP定理和BASE
-高性能，高可用，高可扩
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>大数据下的3V和3高
大数据时代的3v：主要描述问题的
1.海量
2.多样
3.实时

大数据时代的3v：主要对程序的要求
1.高可用
2.高并发
3.高性能
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h1 id="linux命令" tabindex="-1"><a class="header-anchor" href="#linux命令" aria-hidden="true">#</a> Linux命令</h1><p>https://www.bootschool.net/ascii：banner</p><p>/etc/motd</p><p>chgrp：更改文件属组</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>  <span class="token function">chgrp</span> <span class="token punctuation">[</span>-R<span class="token punctuation">]</span> 属组名 文件名
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>chown：更改文件属主，也可以同时更改文件属组</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">chown</span> <span class="token punctuation">[</span>–R<span class="token punctuation">]</span> 属主名 文件名
<span class="token function">chown</span> <span class="token punctuation">[</span>-R<span class="token punctuation">]</span> 属主名：属组名 文件名
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>chmod：更改文件9个属性</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">chmod</span> <span class="token punctuation">[</span>-R<span class="token punctuation">]</span> xyz 文件或目录   <span class="token number">771</span><span class="token punctuation">(</span><span class="token number">124</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>tac与cat命令刚好相反，文件内容从最后一行开始显示，可以看出 tac 是 cat 的倒着写</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">tac</span> filename
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>nl 显示行号</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">nl</span> <span class="token punctuation">[</span>-bnw<span class="token punctuation">]</span> 文件
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>more 一页一页翻动</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">more</span> filename
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>less 一页一页翻动，以下实例输出/etc/man.config文件的内容</p><p>head 取出文件前面几行</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">head</span> <span class="token punctuation">[</span>-n number<span class="token punctuation">]</span> 文件选项与参数：-n 后面接数字，代表显示几行的意思！默认的情况中，显示前面 <span class="token number">10</span> 行！若要显示前 <span class="token number">20</span> 行，就得要这样：
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>tail 取出文件后面几行</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">tail</span> <span class="token punctuation">[</span>-n number<span class="token punctuation">]</span> 文件-n ：后面接数字，代表显示几行的意思
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Linux 链接分两种，一种被称为硬链接（Hard Link），另一种被称为符号链接（Symbolic Link）。</p><p>情况下，<strong>ln</strong> 命令产生硬链接。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@kuangshen /<span class="token punctuation">]</span><span class="token comment"># cd /home[root@kuangshen home]# touch f1  # 创建一个测试文件f1[root@kuangshen home]# lsf1[root@kuangshen home]# ln f1 f2      # 创建f1的一个硬连接文件f2[root@kuangshen home]# ln -s f1 f3   # 创建f1的一个符号连接文件f3[root@kuangshen home]# ls -li        # -i参数显示文件的inode节点信息397247 -rw-r--r-- 2 root  root     0 Mar 13 00:50 f1397247 -rw-r--r-- 2 root  root     0 Mar 13 00:50 f2397248 lrwxrwxrwx 1 root  root     2 Mar 13 00:50 f3 -&gt; f1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>echo 字符串输出 &gt;&gt; f1 输出到 f1文件</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;I am f1 file&quot;</span> <span class="token operator">&gt;&gt;</span>f1
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="vim编辑器" tabindex="-1"><a class="header-anchor" href="#vim编辑器" aria-hidden="true">#</a> vim编辑器</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>h 或 向左箭头键<span class="token punctuation">(</span>←<span class="token punctuation">)</span>	光标向左移动一个字符j 或 向下箭头键<span class="token punctuation">(</span>↓<span class="token punctuation">)</span>	光标向下移动一个字符k 或 向上箭头键<span class="token punctuation">(</span>↑<span class="token punctuation">)</span>	光标向上移动一个字符l 或 向右箭头键<span class="token punctuation">(</span>→<span class="token punctuation">)</span>	光标向右移动一个字符<span class="token punctuation">[</span>Ctrl<span class="token punctuation">]</span> + <span class="token punctuation">[</span>f<span class="token punctuation">]</span>	屏幕『向下』移动一页，相当于 <span class="token punctuation">[</span>Page Down<span class="token punctuation">]</span>按键 <span class="token punctuation">(</span>常用<span class="token punctuation">)</span><span class="token punctuation">[</span>Ctrl<span class="token punctuation">]</span> + <span class="token punctuation">[</span>b<span class="token punctuation">]</span>	屏幕『向上』移动一页，相当于 <span class="token punctuation">[</span>Page Up<span class="token punctuation">]</span> 按键 <span class="token punctuation">(</span>常用<span class="token punctuation">)</span><span class="token punctuation">[</span>Ctrl<span class="token punctuation">]</span> + <span class="token punctuation">[</span>d<span class="token punctuation">]</span>	屏幕『向下』移动半页<span class="token punctuation">[</span>Ctrl<span class="token punctuation">]</span> + <span class="token punctuation">[</span>u<span class="token punctuation">]</span>	屏幕『向上』移动半页+	光标移动到非空格符的下一行-	光标移动到非空格符的上一行n<span class="token operator">&lt;</span> space<span class="token operator">&gt;</span>	那个 n 表示『数字』，例如 <span class="token number">20</span> 。按下数字后再按空格键，光标会向右移动这一行的 n 个字符。0 或功能键<span class="token punctuation">[</span>Home<span class="token punctuation">]</span>	这是数字『 <span class="token number">0</span> 』：移动到这一行的最前面字符处 <span class="token punctuation">(</span>常用<span class="token punctuation">)</span>$ 或功能键<span class="token punctuation">[</span>End<span class="token punctuation">]</span>	移动到这一行的最后面字符处<span class="token punctuation">(</span>常用<span class="token punctuation">)</span>H	光标移动到这个屏幕的最上方那一行的第一个字符M	光标移动到这个屏幕的中央那一行的第一个字符L	光标移动到这个屏幕的最下方那一行的第一个字符G	移动到这个档案的最后一行<span class="token punctuation">(</span>常用<span class="token punctuation">)</span>nG	n 为数字。移动到这个档案的第 n 行。例如 20G 则会移动到这个档案的第 <span class="token number">20</span> 行<span class="token punctuation">(</span>可配合 :set nu<span class="token punctuation">)</span>gg	移动到这个档案的第一行，相当于 1G 啊！<span class="token punctuation">(</span>常用<span class="token punctuation">)</span>n<span class="token operator">&lt;</span> Enter<span class="token operator">&gt;</span>	n 为数字。光标向下移动 n 行<span class="token punctuation">(</span>常用<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>搜索替换	 /word	向光标之下寻找一个名称为 word 的字符串。例如要在档案内搜寻 vbird 这个字符串，就输入 /vbird 即可！<span class="token punctuation">(</span>常用<span class="token punctuation">)</span>?word	向光标之上寻找一个字符串名称为 word 的字符串。n	这个 n 是英文按键。代表重复前一个搜寻的动作。举例来说， 如果刚刚我们执行 /vbird 去向下搜寻 vbird 这个字符串，则按下 n 后，会向下继续搜寻下一个名称为 vbird 的字符串。如果是执行 ?vbird 的话，那么按下 n 则会向上继续搜寻名称为 vbird 的字符串！N	这个 N 是英文按键。与 n 刚好相反，为『反向』进行前一个搜寻动作。例如 /vbird 后，按下 N 则表示『向上』搜寻 vbird 
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="账号管理" tabindex="-1"><a class="header-anchor" href="#账号管理" aria-hidden="true">#</a> 账号管理</h2><p>添加账号 useradd</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">useradd</span> 选项 用户名  <span class="token function">useradd</span> -m chao
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>删除账号</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">userdel</span> -r chao
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>修改帐号</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">usermod</span> 选项 用户名
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>查找文件：ls -l <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;sudo&quot;</span>/var/spool/mail/root  创建新用户存在的目录设置密码： <span class="token function">passwd</span> 用户名    -l 锁定口令，即禁用账号。-u 口令解锁。-d 使账号无口令。-f 强迫用户下次登录时修改口令。删除用户：userdel -r  用户名
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>用户组管理</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">groupadd</span> 选项 用户组增加组：groupadd -g <span class="token number">101</span> group2输出组： <span class="token function">groupdel</span> group1
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>修改用户组的属性使用groupmod命令</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">groupmod</span> 选项 用户组此命令将组group2的组标识号修改为102。groupmod -g <span class="token number">102</span> group2 将组group2的标识号改为10000，组名修改为group3。groupmod –g <span class="token number">10000</span> -n group3 group2
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="磁盘管理" tabindex="-1"><a class="header-anchor" href="#磁盘管理" aria-hidden="true">#</a> 磁盘管理</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Linux磁盘管理常用命令为 df、du。df ：列出文件系统的整体磁盘使用量du：检查磁盘空间使用量-a ：列出所有的文件系统，包括系统特有的 /proc 等文件系统；-k ：以 KBytes 的容量显示各文件系统；-m ：以 MBytes 的容量显示各文件系统；-h ：以人们较易阅读的 GBytes, MBytes, KBytes 等格式自行显示；-H ：以 <span class="token assign-left variable">M</span><span class="token operator">=</span>1000K 取代 <span class="token assign-left variable">M</span><span class="token operator">=</span>1024K 的进位方式；-T ：显示文件系统类型, 连同该 partition 的 filesystem 名称 <span class="token punctuation">(</span>例如 ext3<span class="token punctuation">)</span> 也列出；-i ：不用硬盘容量，而以 inode 的数量来显示
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code> 将容量结果以易读的容量格式显示出来 <span class="token function">df</span> -h 将系统内的所有特殊文件格式及名称都列出来df -aT将 /etc 底下的可用的磁盘容量以易读的容量格式显示df -h /etc
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">du</span> <span class="token punctuation">[</span>-ahskm<span class="token punctuation">]</span> 文件或目录名称将文件的容量也列出来du -a检查根目录底下每个目录所占用的容量du -sm /*
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>磁盘挂载与卸除</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">mount</span> <span class="token punctuation">[</span>-t 文件系统<span class="token punctuation">]</span> <span class="token punctuation">[</span>-L Label名<span class="token punctuation">]</span> <span class="token punctuation">[</span>-o 额外选项<span class="token punctuation">]</span> <span class="token punctuation">[</span>-n<span class="token punctuation">]</span>  装置文件名  挂载点mount /dev/hdc6 /mnt/hdc6
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>磁盘卸载命令 umount</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">umount</span> <span class="token punctuation">[</span>-fn<span class="token punctuation">]</span> 装置文件名或挂载点
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h1 id="redis学习" tabindex="-1"><a class="header-anchor" href="#redis学习" aria-hidden="true">#</a> Redis学习</h1><h2 id="redis启动和关闭" tabindex="-1"><a class="header-anchor" href="#redis启动和关闭" aria-hidden="true">#</a> redis启动和关闭</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>目标路径：cd /usr/local/bin启动：redis-server chenconfig/redis.conf        redis-cli  -p <span class="token number">6379</span>关闭：shutdown查看所有值：keys  *查看开启的进程:ps -ef<span class="token operator">|</span><span class="token function">grep</span> xxx查找：find / -name xxx复制文件：cp /opt/redis/redis.conf  chenredis解压安装包：tar -zxvf  xxx安装gcc环境:yum <span class="token function">install</span> gcc-c++     查看版本号：gcc  -v   make命令：make  install移动文件：mv redis.conf   /optfirewall-cmd --state<span class="token comment">#关闭防火墙systemctl stop firewalld.service查看所有端口号：netstat -aptn1、开放端口firewall-cmd --zone=public --add-port=5672/tcp --permanent # 开放5672端口firewall-cmd --zone=public --remove-port=5672/tcp --permanent #关闭5672端口firewall-cmd --reload # 配置立即生效2、查看防火墙所有开放的端口firewall-cmd --zone=public --list-ports3.、关闭防火墙如果要开放的端口太多，嫌麻烦，可以关闭防火墙，安全性自行评估systemctl stop firewalld.service4、查看防火墙状态firewall-cmd --state5、查看监听的端口netstat -lnpt6、检查端口被哪个进程占用netstat -lnpt |grep 5672</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="redis常用命令" tabindex="-1"><a class="header-anchor" href="#redis常用命令" aria-hidden="true">#</a> redis常用命令</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>切换数据库：select x<span class="token punctuation">(</span>数字<span class="token punctuation">)</span>默认有16个数据库查看数据库大小：dbsize清空全部：flushall   清空当前数据库：flushdb redis是单线程的，基于内存操作地的设置密码：config <span class="token builtin class-name">set</span> requirepass获取密码：config get requirepass
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="redis五大基本数据类型" tabindex="-1"><a class="header-anchor" href="#redis五大基本数据类型" aria-hidden="true">#</a> redis五大基本数据类型</h2><h3 id="redis-key类型" tabindex="-1"><a class="header-anchor" href="#redis-key类型" aria-hidden="true">#</a> <strong>Redis-key类型</strong></h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>判断key是否存在：exists xxx移动key：move name <span class="token number">1</span>设置过期： expire name <span class="token number">10</span><span class="token punctuation">(</span><span class="token number">10</span>秒<span class="token punctuation">)</span>查看当前key的剩余时间：ttl name查看当前key的类型：type key
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="string类型" tabindex="-1"><a class="header-anchor" href="#string类型" aria-hidden="true">#</a> <strong>string类型</strong></h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>key后追加：append key <span class="token string">&quot; &quot;</span>获取字符串的长度：strlen key浏览量加一：incr key浏览量减一：decr key浏览量加10：incrby key <span class="token number">10</span>截取字符串：getrange key <span class="token number">0</span> <span class="token number">10</span>替换值：setrange key <span class="token number">1</span> value 设置过期时间：setex key <span class="token number">10</span> <span class="token string">&quot; &quot;</span>不存在设置： setnx key value设置多个值：mset key value key2 value2 批量获取多个值：mget k1 k2 k3设置user：1对象 json来保存：mset user:1:name chen user:1:age <span class="token number">2</span>获取user：mget user:1:name  user:1:age如果不存在值，则返回niu,如果存在值，获取原来的值，并设置新的值:getset key value
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="list类型" tabindex="-1"><a class="header-anchor" href="#list类型" aria-hidden="true">#</a> List类型</h3><p>所有的list都是由L开头（是双端队列）（key是list集合）</p><p>Redis不区分大小写</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>添加值：LPUSH key value   RPUSH key value获取值：LRANGE list <span class="token number">0</span> -1<span class="token punctuation">(</span>取值时倒着来的<span class="token punctuation">)</span>  移除：LPOP key<span class="token punctuation">(</span>移除左边第一个<span class="token punctuation">)</span>  RPOP key <span class="token punctuation">(</span>移除右边第一个<span class="token punctuation">)</span>获取指定下标的元素的值：Lindex key index返回key的长度：LLEN key 移除指定的值：LREM key count<span class="token punctuation">(</span>移除的个数<span class="token punctuation">)</span> value通过下标截取指定的长度：LTRIM LIST <span class="token number">0</span><span class="token punctuation">(</span>开始的位置<span class="token punctuation">)</span>  <span class="token number">2</span><span class="token punctuation">(</span>截取的位置<span class="token punctuation">)</span>移除列表最后一个元素，将他移动到新的列表中：rpoplpush list list2替换指定下标的值：lset key index value<span class="token punctuation">(</span>如果列表不存在就会报错<span class="token punctuation">)</span>在指定位置插入值：LINSERT key before<span class="token punctuation">(</span>word在之前<span class="token punctuation">)</span><span class="token operator">|</span>after<span class="token punctuation">(</span>word在之后<span class="token punctuation">)</span> <span class="token string">&quot;word&quot;</span> value小结他实际上是一个链表，before Node after , left , right 都可以插入值如果key不存在，创建新的链表如果key存在，新增内容如果移除了所有值，空链表，也代表不存在<span class="token operator">!</span>在两边插入或者改动值，效率高<span class="token operator">!</span>中间元素，相对来说效率会低一点
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="set类型" tabindex="-1"><a class="header-anchor" href="#set类型" aria-hidden="true">#</a> Set类型</h3><p>set中的值不能重复且无序的(key是set)</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>添加一个值：sadd key value查看值：SISMEMBERS key判断是否存在以这个值：smember key value获取set集合内容的个数:scard key移除指定的元素：srem key value随机筛选元素：SRANDMEMBER key <span class="token punctuation">[</span>count<span class="token punctuation">(</span>筛选的次数<span class="token punctuation">)</span><span class="token punctuation">]</span>随机移除元素：spop key将一个指定的值移动到另外一个集合：smove key key1 value<span class="token punctuation">(</span>移动的值<span class="token punctuation">)</span>查找2个set集合不同的元素：sdiff key1 key2<span class="token punctuation">(</span>显示的是key1中与key2不同的元素<span class="token punctuation">)</span>查看2个set的交集：sinter key1 key2查看2个set的并集：sunion key1 key2例如：微博，bilibili六度分割理论
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="hash类型" tabindex="-1"><a class="header-anchor" href="#hash类型" aria-hidden="true">#</a> Hash类型</h3><p>存储的是key-map,这是一个map集合,和string没有区别</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>添加一个值：hset key field value <span class="token punctuation">(</span>是一个map集合<span class="token punctuation">)</span>      hset myhhash fileld chen获取值：hget key fileld                             hget myhhash fileld添加多个值：hmset key field1 hello field2 world     hmset myhash field1 hello field2 world获取多个值：hmget key field1 field2                 hmget myhash field1 field2获取所有值：hgetall key删除某一个值：hdel field获取共有多少键值对：hlen key判断hash某一个值是否存在：hexists key field只获取所有的字段：hkeys key只获取所有的值：hvals key自增：hincrby key field count<span class="token punctuation">(</span>增加的个数<span class="token punctuation">)</span>添加值的另一种写法：hset user:1 name chenhash更适合存储对象，string更适合存储字符串
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="zset类型" tabindex="-1"><a class="header-anchor" href="#zset类型" aria-hidden="true">#</a> Zset类型</h3><p>是一个有序集合，在set基础上增加了一个值(类似于List集合)(多一个计数位)</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>添加一个值：zadd key score<span class="token punctuation">(</span>数字，便于排序<span class="token punctuation">)</span>  value获取值：zrange key min max按照大小排序：ZRANGEBYSCORE key -inf +inf <span class="token punctuation">(</span>从小到大  负无穷，正无穷<span class="token punctuation">)</span>  <span class="token punctuation">[</span>withscores<span class="token punctuation">]</span><span class="token punctuation">(</span>附带成绩<span class="token punctuation">)</span>移除元素：zrem key value获取集合中的个数：zcard key 按照从大到小排序：ZREVRANGE key <span class="token number">0</span> -1获取区间的成员数量：zcount key <span class="token number">1</span> <span class="token number">3</span>案列：set排序 工资表排序 排行榜应用实现
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="三种特殊数据类型" tabindex="-1"><a class="header-anchor" href="#三种特殊数据类型" aria-hidden="true">#</a> 三种特殊数据类型</h2><h3 id="geospatial-地理空间" tabindex="-1"><a class="header-anchor" href="#geospatial-地理空间" aria-hidden="true">#</a> geospatial( <a href="http://www.redis.cn/commands/geoadd.html" target="_blank" rel="noopener noreferrer">地理空间<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)</h3><p>地理位置(两极无法添加)底层是(Zset)</p><p>获得当前定位</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>指定单位的参数 unit 必须是以下单位的其中一个：m 表示单位为米。km 表示单位为千米。mi 表示单位为英里。ft 表示单位为英尺。
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>添加地理位置：geoadd china:city <span class="token number">116.40</span> <span class="token number">39.90</span> beijing获取地理位置：geopos china:city beijing定位2地之间的距离：geodist key beijing chongqin km找附近的人，以经纬度寻找：georadius china:city <span class="token number">110</span> <span class="token number">30</span> <span class="token number">1000</span> km<span class="token punctuation">(</span>寻找周围半径为1000km的城市<span class="token punctuation">)</span>            georadius china:city <span class="token number">120</span> <span class="token number">30</span> <span class="token number">500</span> km withcoord withdist  count <span class="token number">2</span>以城市寻找：georadiusbymember china:city beijing <span class="token number">1000</span> km获取成员经纬坐标的geohash表示：geohash china:city beijing shanghai  <span class="token punctuation">(</span>返回字符串越近，距离越近<span class="token punctuation">)</span>查看全部元素：zrange key <span class="token number">0</span> -1移除指定元素：zrem key value
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="hyperloglog-基数统计" tabindex="-1"><a class="header-anchor" href="#hyperloglog-基数统计" aria-hidden="true">#</a> Hyperloglog(基数统计)</h3><p>不重复的元素，是一个基数统计算法</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>添加元素：PFadd key a b c  统计存在的元素（不重复）PFcount key合并分支:PFmerge key<span class="token punctuation">(</span>生成的目标<span class="token punctuation">)</span> key1 key2
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="bitmaps-位存储" tabindex="-1"><a class="header-anchor" href="#bitmaps-位存储" aria-hidden="true">#</a> Bitmaps(位存储)</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>添加状态：setbit key offset<span class="token punctuation">(</span>标志位<span class="token punctuation">)</span>  value<span class="token punctuation">(</span><span class="token number">0</span>或1<span class="token punctuation">)</span>    setbit m <span class="token number">0</span> <span class="token number">1</span>查看某一天的值：getbit key offset统计操作：bitcount key  
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="redis基本事务" tabindex="-1"><a class="header-anchor" href="#redis基本事务" aria-hidden="true">#</a> Redis基本事务</h2><p>Redis单条命令式保存原子性的，但是事务不保证原子性</p><p>Redis没有隔离级别的概念</p><p>Redis事务本质：一组命令的集合，一个事务的所有命令都会被序列化，顺序执行</p><p>一次性，顺序性，排他性</p><p>Redis事务</p><ul><li>开启事务（multi）</li><li>命令入队</li><li>执行事务(exec)</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>开启事务：127.0.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> multiOK127.0.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k1 v1QUEUED127.0.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k2 v2QUEUED127.0.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> get k1QUEUED127.0.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> get k2QUEUED127.0.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> exec1<span class="token punctuation">)</span> OK2<span class="token punctuation">)</span> OK3<span class="token punctuation">)</span> <span class="token string">&quot;v1&quot;</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;v2&quot;</span>放弃事务：discard
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>编译型异常</p><p>运行时异常</p><h2 id="监控" tabindex="-1"><a class="header-anchor" href="#监控" aria-hidden="true">#</a> 监控</h2><p>悲观锁：什么时候都会出错，无论做什么都会加锁</p><p>乐观锁什么时候都不会出错，无论做什么都不会加锁，更新数据的时候去判断一下，在此期间是否有人修改过这个数据</p><h2 id="jedis" tabindex="-1"><a class="header-anchor" href="#jedis" aria-hidden="true">#</a> Jedis</h2><h2 id="redis持久化" tabindex="-1"><a class="header-anchor" href="#redis持久化" aria-hidden="true">#</a> Redis持久化</h2><p>RDB（Redis Database)</p><p>优点：</p><ol><li>适合大规模数据恢复</li><li>对数据完整性要求不高</li></ol><p>缺点：</p><ol><li>需要一定的时间间隔，redis意外宕机，最后一次修改数据就没了</li><li>fork进程时，会占用一定的内存空间</li></ol><p>AOF(Append Only File)</p><p>将我们所有的命令都记录下来，恢复的时候把文件执行一遍，默认文件无限制追加</p><p>aof有错误redis启动不起来</p><p>redis提供了redis-check-aof --fix appendonly.aof</p><p>优点：</p><ol><li>每一次修改都同步，文件完整性会更好</li><li>每秒同步一次，可能丢失一秒数据</li><li>从不同步，效率最高的</li></ol><p>缺点：</p><ol><li>相对于数据文件来说，aof远大于rdb 修复速度慢</li><li>aof运行速度比rdb慢</li></ol><h2 id="redis发布订阅" tabindex="-1"><a class="header-anchor" href="#redis发布订阅" aria-hidden="true">#</a> Redis发布订阅</h2><p>是一种消息通信模式</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>订阅频道：subscribe channel<span class="token punctuation">(</span>频道名称<span class="token punctuation">)</span>发送信息：publish channel  message
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="redis主从复制" tabindex="-1"><a class="header-anchor" href="#redis主从复制" aria-hidden="true">#</a> Redis主从复制</h2><p>读写分离，一主二从</p><p>作用：</p><ol><li>数据冗余：主从复制实现了数据的热备份，是持久化之外的一种数据冗余的方式。</li><li>故障恢复：当主节点故障时，从节点可以暂时替代主节点提供服务，是一种服务冗余的方式</li><li>负载均衡：在主从复制的基础上，配合读写分离，由主节点进行写操作，从节点进行读操作，分担服务器的负载；尤其是在多读少写的场景下，通过多个从节点分担负载，提高并发量。</li><li>高可用基石：主从复制还是哨兵和集群能够实施的基础。</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>查看主从复制的信息：info replication
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>集群搭建</p><p>端口 pid log名字 rdb</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>配置从机：slaveof <span class="token function">host</span> port 手动配置成为主机：slaveof no one  
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>全量复制</p><p>增量复制</p><p>层层链路</p><h2 id="哨兵模式" tabindex="-1"><a class="header-anchor" href="#哨兵模式" aria-hidden="true">#</a> 哨兵模式</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>配置哨兵：sentinel monitor myredis <span class="token number">127.0</span>.0.1  <span class="token number">6379</span>  <span class="token number">1</span>     sentinel.conf启动项目：redis-sentinel chenconfig/sentinel.conf
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>数字1表示 ：当一个哨兵主观认为主机断开，就可以客观认为主机故障，然后开始选举新的主机。</p><p>哨兵的作用：</p><ul><li>通过发送命令，让Redis服务器返回监控其运行状态，包括主服务器和从服务器。</li><li>当哨兵监测到master宕机，会自动将slave切换成master，然后通过<strong>发布订阅模式</strong>通知其他的从服务器，修改配置文件，让它们切换主机。</li></ul><p>优点：</p><ol><li>哨兵集群，基于主从复制模式，所有主从复制的优点，它都有</li><li>主从可以切换，故障可以转移，系统的可用性更好</li><li>哨兵模式是主从模式的升级，手动到自动，更加健壮</li></ol><p>缺点：</p><ol><li>Redis不好在线扩容，集群容量一旦达到上限，在线扩容就十分麻烦</li><li>实现哨兵模式的配置其实是很麻烦的，里面有很多配置项</li></ol><h2 id="缓存穿透与雪崩" tabindex="-1"><a class="header-anchor" href="#缓存穿透与雪崩" aria-hidden="true">#</a> 缓存穿透与雪崩</h2><h3 id="缓存穿透-查不到" tabindex="-1"><a class="header-anchor" href="#缓存穿透-查不到" aria-hidden="true">#</a> 缓存穿透（查不到）</h3><p><strong>布隆过滤器</strong></p><p>对所有可能查询的参数以Hash的形式存储，以便快速确定是否存在这个值，在控制层先进行拦截校验，校验不通过直接打回，减轻了存储系统的压力。</p><p><strong>缓存空对象</strong></p><p>一次请求若在缓存和数据库中都没找到，就在缓存中方一个空对象用于处理后续这个请求。</p><p>缓存击穿（量太大，缓存过期）</p><p>相较于缓存穿透，缓存击穿的目的性更强，一个存在的key，在缓存过期的一刻，同时有大量的请求，这些请求都会击穿到DB，造成瞬时DB请求量大、压力骤增。这就是缓存被击穿，只是针对其中某个key的缓存不可用而导致击穿，但是其他的key依然可以使用缓存响应。</p><h3 id="缓存击穿-量太大-缓存过期" tabindex="-1"><a class="header-anchor" href="#缓存击穿-量太大-缓存过期" aria-hidden="true">#</a> 缓存击穿（量太大，缓存过期）</h3><p>设置热点数据永不过期</p><p>这样就不会出现热点数据过期的情况，但是当Redis内存空间满的时候也会清理部分数据，而且此种方案会占用空间，一旦热点数据多了起来，就会占用部分空间。</p><p>加互斥锁(分布式锁)</p><p>在访问key之前，采用SETNX（set if not exists）来设置另一个短期key来锁住当前key的访问，访问结束再删除该短期key。保证同时刻只有一个线程访问。这样对锁的要求就十分高。</p><h3 id="缓存雪崩" tabindex="-1"><a class="header-anchor" href="#缓存雪崩" aria-hidden="true">#</a> 缓存雪崩</h3><p>redis高可用</p><p>这个思想的含义是，既然redis有可能挂掉，那我多增设几台redis，这样一台挂掉之后其他的还可以继续工作，其实就是搭建的集群</p><p>限流降级</p><p>这个解决方案的思想是，在缓存失效后，通过加锁或者队列来控制读数据库写缓存的线程数量。比如对某个key只允许一个线程查询数据和写缓存，其他线程等待。</p><p>数据预热</p><p>数据加热的含义就是在正式部署之前，我先把可能的数据先预先访问一遍，这样部分可能大量访问的数据就会加载到缓存中。在即将发生大并发访问前手动触发加载缓存不同的key，设置不同的过期时间，让缓存失效的时间点尽量均匀。</p><!--]--></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/demo/src/zh/posts/article/article3.md" rel="noopener noreferrer" target="_blank" arialabel="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" arialabelledby="edit"><title id="edit" lang="en">edit icon</title><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><!----><!----></footer><nav class="page-nav"><a href="/zh/posts/article/article2.html" class="nav-link prev" arialabel="ElacticSearch"><div class="hint"><span class="arrow left"></span>上一页</div><div class="link"><i class="icon iconfont icon-edit"></i>ElacticSearch</div></a><a href="/zh/posts/article/article4.html" class="nav-link next" arialabel="SpingSecurity"><div class="hint">下一页<span class="arrow right"></span></div><div class="link">SpingSecurity<i class="icon iconfont icon-edit"></i></div></a></nav><div class="giscus-wrapper input-top" style="display:block;"><!----></div><!----></main><!--]--><footer class="footer-wrapper"><div class="footer">联系我们</div><div class="copyright">Copyright © 2022 小陈博客</div></footer></div><!--]--><!----><!--[--><!-- Root element of PhotoSwipe. Must have class pswp. --><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><!-- Background of PhotoSwipe. 
    It’s a separate element, as animating opacity is faster than rgba().--><div class="pswp__bg"></div><!-- Slides wrapper with overflow:hidden. --><div class="pswp__scroll-wrap"><!-- Container that holds slides. PhotoSwipe keeps only 3 slides in DOM to save memory. --><div class="pswp__container"><!-- don’t modify these 3 pswp__item elements, data is added later on --><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. --><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><!--  Controls are self-explanatory. Order can be changed. --><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="关闭"></button><button class="pswp__button pswp__button--share" title="分享"></button><button class="pswp__button pswp__button--fs" title="切换全屏"></button><button class="pswp__button pswp__button--zoom" title="缩放"></button><!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR --><!-- element will get class pswp__preloader--active when preloader is running --><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="上一个 (左箭头)"></button><button class="pswp__button pswp__button--arrow--right" title="下一个 (右箭头)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><!--]--><!--]--></div>
    <script type="module" src="/assets/app.276e6fe4.js" defer></script>
  </body>
</html>
