<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.36" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://vuepress-theme-hope-v2-demo.mrhope.site/zh/posts/article/article2.html"><meta property="og:site_name" content="我的博客"><meta property="og:title" content="ElacticSearch"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:locale:alternate" content="en-US"><meta property="article:tag" content="tag A"><meta property="article:tag" content="tag B"><meta property="article:published_time" content="2022-01-02T00:00:00.000Z"><link rel="stylesheet" href="//at.alicdn.com/t/font_2410206_mfj6e1vbwo.css"><title>ElacticSearch | 我的博客</title><meta name="description" content="">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.b7b590a7.css">
    <link rel="modulepreload" href="/assets/app.276e6fe4.js"><link rel="modulepreload" href="/assets/article2.html.b6f99f2d.js"><link rel="modulepreload" href="/assets/article2.html.7fa2be2d.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc sidebar-open"><!--[--><header class="navbar"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><a href="/zh/" class="home-link"><!----><!----><span class="site-name hide-in-pad">我的博客</span><!--[--><!----><!--]--></a><nav class="nav-links" style=""><div class="nav-item hide-in-mobile"><a href="/zh/" class="nav-link" arialabel="首页"><i class="icon iconfont icon-home"></i>首页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/zh/home.html" class="nav-link" arialabel="项目主页"><i class="icon iconfont icon-home"></i>项目主页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/zh/guide/" class="nav-link" arialabel="指南"><i class="icon iconfont icon-creative"></i>指南<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" arialabel="博文"><span class="title"><i class="icon iconfont icon-edit"></i>博文</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>文章 1-4</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/zh/posts/article/article1.html" class="nav-link" arialabel="Docker学习"><i class="icon iconfont icon-edit"></i>Docker学习<!----></a></li><li class="dropdown-subitem"><a aria-current="page" href="/zh/posts/article/article2.html" class="router-link-active router-link-exact-active nav-link active" arialabel="ElacticSearch"><i class="icon iconfont icon-edit"></i>ElacticSearch<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article3.html" class="nav-link" arialabel="Redis学习"><i class="icon iconfont icon-edit"></i>Redis学习<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article4.html" class="nav-link" arialabel="SpringSecurity"><i class="icon iconfont icon-edit"></i>SpringSecurity<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>文章 5-12</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/zh/posts/article/article5.html" class="nav-link" arialabel="SpringCloud"><i class="icon iconfont icon-edit"></i>SpringCloud<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article6.html" class="nav-link" arialabel="网站跨域问题解决方法"><i class="icon iconfont icon-edit"></i>网站跨域问题解决方法<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article7.html" class="nav-link" arialabel="设计模式"><i class="icon iconfont icon-edit"></i>设计模式<!----></a></li><li class="dropdown-subitem"><a href="/zh/posts/article/article8.html" class="nav-link" arialabel="Spring学习"><i class="icon iconfont icon-edit"></i>Spring学习<!----></a></li></ul></li><li class="dropdown-item"><a href="/zh/posts/article9.html" class="nav-link" arialabel="前端学习"><i class="icon iconfont icon-edit"></i>前端学习<!----></a></li><li class="dropdown-item"><a href="/zh/posts/article10.html" class="nav-link" arialabel="Swagger"><i class="icon iconfont icon-edit"></i>Swagger<!----></a></li><li class="dropdown-item"><a href="/zh/posts/article11.html" class="nav-link" arialabel="Java基础知识"><i class="icon iconfont icon-edit"></i>Java基础知识<!----></a></li><li class="dropdown-item"><a href="/zh/posts/article12.html" class="nav-link" arialabel="JavaScript"><i class="icon iconfont icon-edit"></i>JavaScript<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://vuepress-theme-hope.github.io/v2/zh/" rel="noopener noreferrer" target="_blank" arialabel="主题文档" class="nav-link"><i class="icon iconfont icon-note"></i>主题文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><div class="nav-actions-wrapper"><!--[--><!----><!--]--><div class="nav-item"><div class="dropdown-wrapper i18n-dropdown"><button class="dropdown-title" type="button" arialabel="选择语言"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewbox="0 0 1024 1024" arialabelledby="i18n" style="width:1rem;height:1rem;vertical-align:middle;"><title id="i18n" lang="en">i18n icon</title><g fill="currentColor"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></g></svg><!--]--><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/posts/article/article2.html" class="nav-link" arialabel="English"><!---->English<!----></a></li><li class="dropdown-item"><a aria-current="page" href="/zh/posts/article/article2.html" class="router-link-active router-link-exact-active nav-link active" arialabel="简体中文"><!---->简体中文<!----></a></li></ul></button></div></div><div class="nav-item"><a class="repo-link" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" arialabelledby="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><title id="github" lang="en">github icon</title><g fill="currentColor"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></g></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewbox="0 0 1024 1024" arialabelledby="outlook"><title id="outlook" lang="en">outlook icon</title><g fill="currentColor"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></g></svg><div class="outlook-dropdown"><!----></div></button></div><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button><!--[--><!----><!--]--></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/zh/" class="nav-link sidebar-link sidebar-page" arialabel="首页"><i class="icon iconfont icon-home"></i>首页<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/home.html" class="nav-link sidebar-link sidebar-page" arialabel="项目主页"><i class="icon iconfont icon-home"></i>项目主页<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/slide.html" class="nav-link sidebar-link sidebar-page" arialabel="幻灯片页"><i class="icon iconfont icon-slides"></i>幻灯片页<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading clickable"><i class="icon iconfont icon-creative"></i><a href="/zh/guide/" class="title">如何使用</a><!----></p><!--[--><!--[--><ul class="sidebar-links"><li><!--[--><a href="/zh/guide/" class="nav-link sidebar-link sidebar-page" arialabel="主要功能与配置演示"><i class="icon iconfont icon-creative"></i>主要功能与配置演示<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/guide/page.html" class="nav-link sidebar-link sidebar-page" arialabel="页面配置"><i class="icon iconfont icon-page"></i>页面配置<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/guide/markdown.html" class="nav-link sidebar-link sidebar-page" arialabel="Markdown 增强"><i class="icon iconfont icon-markdown"></i>Markdown 增强<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/guide/disable.html" class="nav-link sidebar-link sidebar-page" arialabel="组件禁用"><i class="icon iconfont icon-config"></i>组件禁用<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/guide/encrypt.html" class="nav-link sidebar-link sidebar-page" arialabel="密码加密的文章"><i class="icon iconfont icon-lock"></i>密码加密的文章<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--]--><!----><!--]--></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading active"><i class="icon iconfont icon-note"></i><span class="title">文章</span><!----></p><!--[--><!--[--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><i class="icon iconfont icon-note"></i><span class="title">文章 1-4</span><span class="arrow down"></span></button><!--[--><!--[--><ul class="sidebar-links"><li><!--[--><a href="/zh/posts/article/article1.html" class="nav-link sidebar-link sidebar-page" arialabel="Docker学习"><i class="icon iconfont icon-edit"></i>Docker学习<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/zh/posts/article/article2.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" arialabel="ElacticSearch"><i class="icon iconfont icon-edit"></i>ElacticSearch<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#什么是elasticsearch" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="什么是Elasticsearch？"><!---->什么是Elasticsearch？<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#lucene和elasticsearch关系" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="Lucene和Elasticsearch关系？"><!---->Lucene和Elasticsearch关系？<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#常用索引指令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="常用索引指令"><!---->常用索引指令<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#创建一个索引put" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="创建一个索引PUT"><!---->创建一个索引PUT<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#可以获取具体的信息-get" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="可以获取具体的信息，GET"><!---->可以获取具体的信息，GET<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#修改索引put" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="修改索引PUT"><!---->修改索引PUT<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#删除索引delete" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="删除索引DELETE"><!---->删除索引DELETE<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#文档基本操作" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="文档基本操作"><!---->文档基本操作<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#条件查询" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="条件查询"><!---->条件查询<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#花式查询" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="花式查询"><!---->花式查询<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#查询的参数体是一个json体" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="查询的参数体是一个json体"><!---->查询的参数体是一个json体<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#信息过滤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="信息过滤"><!---->信息过滤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#排序" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="排序"><!---->排序<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#分页查询" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="分页查询"><!---->分页查询<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#must命令-and-所有条件都要符合" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="must命令（and) 所有条件都要符合"><!---->must命令（and) 所有条件都要符合<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#should命令-or" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="should命令（or)"><!---->should命令（or)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#must-not" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="must_not"><!---->must_not<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#filter-使用filter进行数据过滤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="filter 使用filter进行数据过滤"><!---->filter 使用filter进行数据过滤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#匹配多个条件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="匹配多个条件"><!---->匹配多个条件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#精确查询" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="精确查询"><!---->精确查询<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#多个值匹配的精确查询" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="多个值匹配的精确查询"><!---->多个值匹配的精确查询<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#高亮查询" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="高亮查询"><!---->高亮查询<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#自定义高亮条件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="自定义高亮条件"><!---->自定义高亮条件<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#springboot操作es" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="Springboot操作es"><!---->Springboot操作es<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#修改es版本" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="修改es版本"><!---->修改es版本<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#创建索引" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="创建索引"><!---->创建索引<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#获取索引-判断是否存在" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="获取索引,判断是否存在"><!---->获取索引,判断是否存在<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#删除索引" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="删除索引"><!---->删除索引<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#添加文档" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="添加文档"><!---->添加文档<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#获取文档记录" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="获取文档记录"><!---->获取文档记录<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#更新文档信息" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="更新文档信息"><!---->更新文档信息<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#删除文档记录" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="删除文档记录"><!---->删除文档记录<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#批量插入数据" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="批量插入数据"><!---->批量插入数据<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/zh/posts/article/article2.html#搜索" class="router-link-active router-link-exact-active nav-link sidebar-link heading" arialabel="搜索"><!---->搜索<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/zh/posts/article/article3.html" class="nav-link sidebar-link sidebar-page" arialabel="Redis"><i class="icon iconfont icon-edit"></i>Redis<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/article/article4.html" class="nav-link sidebar-link sidebar-page" arialabel="SpingSecurity"><i class="icon iconfont icon-edit"></i>SpingSecurity<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--]--><!----><!--]--></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><i class="icon iconfont icon-note"></i><span class="title">文章 5-12</span><!----></p><!--[--><!--[--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><i class="icon iconfont icon-note"></i><span class="title">文章 5-8</span><span class="arrow right"></span></button><!--[--><!--[--><!----><!--]--><!----><!--]--></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><i class="icon iconfont icon-note"></i><span class="title">文章 9-12</span><!----></p><!--[--><!--[--><ul class="sidebar-links"><li><!--[--><a href="/zh/posts/article9.html" class="nav-link sidebar-link sidebar-page" arialabel="前端汇总"><i class="icon iconfont icon-edit"></i>前端汇总<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/article10.html" class="nav-link sidebar-link sidebar-page" arialabel="Swagger"><i class="icon iconfont icon-edit"></i>Swagger<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/article11.html" class="nav-link sidebar-link sidebar-page" arialabel="/zh/posts/article11"><i class="icon iconfont icon-edit"></i>/zh/posts/article11<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/zh/posts/article12.html" class="nav-link sidebar-link sidebar-page" arialabel="JavaScript学习"><i class="icon iconfont icon-edit"></i>JavaScript学习<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--]--><!----><!--]--></section><!--]--></li></ul><!--]--><!----><!--]--></section><!--]--></li></ul><!--]--><!----><!--]--></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><i class="icon iconfont icon-edit"></i>ElacticSearch</h1><div class="article-info"><span class="author-info" arialabel="作者🖊" data-balloon-pos="down" isoriginal="false" pageview="false" color="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" arialabelledby="author"><title id="author" lang="en">author icon</title><g fill="currentColor"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></g></svg><span><a class="author-item" href="https://mrhope.site" target="_blank" rel="noopener noreferrer">小陈博客</a></span><span property="author" content="小陈博客"></span></span><!----><span class="date-info" arialabel="写作日期📅" data-balloon-pos="down" isoriginal="false" pageview="false" color="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" arialabelledby="calendar"><title id="calendar" lang="en">calendar icon</title><g fill="currentColor"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></g></svg><span>2022年1月2日</span><meta property="datePublished" content="2022-01-02T00:00:00.000Z"></span><span class="category-info" arialabel="分类🌈" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewbox="0 0 1024 1024" arialabelledby="category"><title id="category" lang="en">category icon</title><g fill="currentColor"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></g></svg><ul class="categories-wrapper"><li class="category category3 clickable" role="navigation">CategoryA</li><meta property="articleSection" content="CategoryA"></ul></span><span arialabel="标签🏷" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewbox="0 0 1024 1024" arialabelledby="tag"><title id="tag" lang="en">tag icon</title><g fill="currentColor"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></g></svg><ul class="tags-wrapper"><li class="tag tag2 clickable" role="navigation">tag A</li><li class="tag tag8 clickable" role="navigation">tag B</li></ul><meta property="keywords" content="tag A,tag B"></span><span class="reading-time-info" arialabel="阅读时间⌛" data-balloon-pos="down" isoriginal="false" pageview="false" color="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" arialabelledby="timer"><title id="timer" lang="en">timer icon</title><g fill="currentColor"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></g></svg><span>大约 8 分钟</span><meta property="timeRequired" content="PT8M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc-list"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#什么是elasticsearch" class="router-link-active router-link-exact-active toc-link level2">什么是Elasticsearch？</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#lucene和elasticsearch关系" class="router-link-active router-link-exact-active toc-link level2">Lucene和Elasticsearch关系？</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#常用索引指令" class="router-link-active router-link-exact-active toc-link level2">常用索引指令</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#创建一个索引put" class="router-link-active router-link-exact-active toc-link level3">创建一个索引PUT</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#可以获取具体的信息-get" class="router-link-active router-link-exact-active toc-link level3">可以获取具体的信息，GET</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#修改索引put" class="router-link-active router-link-exact-active toc-link level3">修改索引PUT</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#删除索引delete" class="router-link-active router-link-exact-active toc-link level3">删除索引DELETE</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#文档基本操作" class="router-link-active router-link-exact-active toc-link level2">文档基本操作</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#条件查询" class="router-link-active router-link-exact-active toc-link level3">条件查询</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#花式查询" class="router-link-active router-link-exact-active toc-link level2">花式查询</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#查询的参数体是一个json体" class="router-link-active router-link-exact-active toc-link level3">查询的参数体是一个json体</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#信息过滤" class="router-link-active router-link-exact-active toc-link level3">信息过滤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#排序" class="router-link-active router-link-exact-active toc-link level3">排序</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#分页查询" class="router-link-active router-link-exact-active toc-link level3">分页查询</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#must命令-and-所有条件都要符合" class="router-link-active router-link-exact-active toc-link level3">must命令（and) 所有条件都要符合</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#should命令-or" class="router-link-active router-link-exact-active toc-link level3">should命令（or)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#must-not" class="router-link-active router-link-exact-active toc-link level3">must_not</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#filter-使用filter进行数据过滤" class="router-link-active router-link-exact-active toc-link level3">filter 使用filter进行数据过滤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#匹配多个条件" class="router-link-active router-link-exact-active toc-link level3">匹配多个条件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#精确查询" class="router-link-active router-link-exact-active toc-link level3">精确查询</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#多个值匹配的精确查询" class="router-link-active router-link-exact-active toc-link level3">多个值匹配的精确查询</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#高亮查询" class="router-link-active router-link-exact-active toc-link level3">高亮查询</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#自定义高亮条件" class="router-link-active router-link-exact-active toc-link level3">自定义高亮条件</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#springboot操作es" class="router-link-active router-link-exact-active toc-link level2">Springboot操作es</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#修改es版本" class="router-link-active router-link-exact-active toc-link level3">修改es版本</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#创建索引" class="router-link-active router-link-exact-active toc-link level3">创建索引</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#获取索引-判断是否存在" class="router-link-active router-link-exact-active toc-link level3">获取索引,判断是否存在</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#删除索引" class="router-link-active router-link-exact-active toc-link level3">删除索引</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#添加文档" class="router-link-active router-link-exact-active toc-link level3">添加文档</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#获取文档记录" class="router-link-active router-link-exact-active toc-link level3">获取文档记录</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#更新文档信息" class="router-link-active router-link-exact-active toc-link level3">更新文档信息</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#删除文档记录" class="router-link-active router-link-exact-active toc-link level3">删除文档记录</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#批量插入数据" class="router-link-active router-link-exact-active toc-link level3">批量插入数据</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/zh/posts/article/article2.html#搜索" class="router-link-active router-link-exact-active toc-link level3">搜索</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><!--[--><h1 id="elacticsearch" tabindex="-1"><a class="header-anchor" href="#elacticsearch" aria-hidden="true">#</a> ElacticSearch</h1><h2 id="什么是elasticsearch" tabindex="-1"><a class="header-anchor" href="#什么是elasticsearch" aria-hidden="true">#</a> 什么是Elasticsearch？</h2><p>Elasticsearch是一个基于<a href="https://baike.baidu.com/item/Lucene/6753302" target="_blank" rel="noopener noreferrer">Lucene<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>的搜索服务器。它提供了一个分布式多用户能力的<a href="https://baike.baidu.com/item/%E5%85%A8%E6%96%87%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/7847410" target="_blank" rel="noopener noreferrer">全文搜索引擎<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，基于RESTful web接口。Elasticsearch是用Java语言开发的，并作为Apache许可条款下的开放源码发布，是一种流行的企业级搜索引擎。Elasticsearch用于<a href="https://baike.baidu.com/item/%E4%BA%91%E8%AE%A1%E7%AE%97/9969353" target="_blank" rel="noopener noreferrer">云计算<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>中，能够达到实时搜索，稳定，可靠，快速，安装使用方便。官方客户端在Java、.NET（C#）、PHP、Python、Apache Groovy、Ruby和许多其他语言中都是可用的。根据DB-Engines的排名显示，Elasticsearch是最受欢迎的企业搜索引擎，其次是Apache Solr，也是基于Lucene。</p><p>搜索 全文搜索引擎</p><p>库，表，记录</p><p>Lucene是一套信息检索工具包 ---- jar包!不包含搜索引擎系统</p><p>包含的︰索引结构!读写索引的工具!排序，搜索规则....工具类</p><h2 id="lucene和elasticsearch关系" tabindex="-1"><a class="header-anchor" href="#lucene和elasticsearch关系" aria-hidden="true">#</a> Lucene和Elasticsearch关系？</h2><p>ElacticSearch是基于Lucene做了一些封装和增强</p><p>ElacticSearch默认端口是9200</p><p>ElacticSearch通信地址：9300</p><p>elasticsearch head默认端口：9100</p><p>kibana默认端口：5601</p><p>存在跨域问题</p><p>elasticsearch.yml</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>http.cors.enabled: true 
http.cors.allow-origin: &quot;*&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ELK是Elasticsearch、Logstash、Kibana三大开源框架（日志分析架构技术栈）</p><p>收集清洗数据--&gt;搜索，存储--&gt; Kibana</p><p>Elasticsearch是面向文档的</p><p>最小单元是文档（row对应数据库中以一行记录)</p><p>倒排索引查找文档</p><h2 id="常用索引指令" tabindex="-1"><a class="header-anchor" href="#常用索引指令" aria-hidden="true">#</a> 常用索引指令</h2><p>ik分词器</p><p>IK提供了两个分词算法:ik_smart和ik_max_word，其中ik_smart为最少切分，ik_max_word为最细粒度划分</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET _analyze
{
  &quot;analyzer&quot;: &quot;ik_max_word&quot;,
  &quot;text&quot;: &quot;中国共产党&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="创建一个索引put" tabindex="-1"><a class="header-anchor" href="#创建一个索引put" aria-hidden="true">#</a> 创建一个索引PUT</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>PUT /test1/type1/1 库名(索引名)/类型名/文档id
{
&quot;name&quot;: &quot;躺着数星星&quot;,
&quot;age&quot;: 20
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><p>字符串类型</p><p>text 、 keyword</p></li><li><p>数值类型</p><p>long, integer, short, byte, double, flfloat, half_flfloat, scaled_flfloat</p></li><li><p>日期类型</p><p>date</p></li><li><p>布尔值类型</p><p>boolean</p></li><li><p>二进制类型</p><p>binary</p></li></ul><p>设计一个库（索引规则）</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>PUT /test2
{
  &quot;mappings&quot;: {
    &quot;properties&quot;: {
      &quot;name&quot;: {
        &quot;type&quot;: &quot;text&quot;
      },
      &quot;age&quot;: {
        &quot;type&quot;: &quot;long&quot;
      },
      &quot;birthday&quot;: {
        &quot;type&quot;: &quot;date&quot;
      }
    }
  }
}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="可以获取具体的信息-get" tabindex="-1"><a class="header-anchor" href="#可以获取具体的信息-get" aria-hidden="true">#</a> 可以获取具体的信息，GET</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET /test2
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>查看默认信息</p><p>如果自己的文档字段没有指定，那么es就会给我们默认配置字段类型</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>PUT /test3/_doc/1
{
  &quot;name&quot;: &quot;躺着数星星&quot;,
  &quot;age&quot;: 20,
  &quot;birth&quot;: &quot;2000-10-20&quot;
}

GET /test3
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>获取数据库健康值</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET /_cat/health
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>查看所有信息</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET _cat/indices?v
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="修改索引put" tabindex="-1"><a class="header-anchor" href="#修改索引put" aria-hidden="true">#</a> 修改索引PUT</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>PUT /test1/type1/1{  &quot;name&quot; :&quot;躺着数星星&quot;,  &quot;age&quot;: 22  }  直接修改
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>POST修改</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>POST /test3/_doc/1/_update   {  &quot;doc&quot;: {    &quot;age&quot;:22  }}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="删除索引delete" tabindex="-1"><a class="header-anchor" href="#删除索引delete" aria-hidden="true">#</a> 删除索引DELETE</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>DELETE /test1
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>通过DELETE命令实现删除、根据你的请求来判断是删除索引还是删除文档记录</p><h2 id="文档基本操作" tabindex="-1"><a class="header-anchor" href="#文档基本操作" aria-hidden="true">#</a> 文档基本操作</h2><h3 id="条件查询" tabindex="-1"><a class="header-anchor" href="#条件查询" aria-hidden="true">#</a> 条件查询</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET /chen/user/_search?q=name:躺着数星星
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="花式查询" tabindex="-1"><a class="header-anchor" href="#花式查询" aria-hidden="true">#</a> 花式查询</h2><h3 id="查询的参数体是一个json体" tabindex="-1"><a class="header-anchor" href="#查询的参数体是一个json体" aria-hidden="true">#</a> 查询的参数体是一个json体</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET chen/user/_search{  &quot;query&quot;: {    &quot;match&quot;: {      &quot;name&quot;: &quot;躺着数星星&quot;    }  }}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>hit :索引和文档的信息查询的结果总数，然后就是查询出来的具体的文档</p><h3 id="信息过滤" tabindex="-1"><a class="header-anchor" href="#信息过滤" aria-hidden="true">#</a> 信息过滤</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET chen/user/_search{  &quot;query&quot;: {    &quot;match&quot;: {      &quot;name&quot;: &quot;詹姆斯&quot;    }  },  &quot;_source&quot;: [&quot;tags&quot;]}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="排序" tabindex="-1"><a class="header-anchor" href="#排序" aria-hidden="true">#</a> 排序</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET chen/user/_search{  &quot;query&quot;: {    &quot;match&quot;: {      &quot;name&quot;: &quot;詹姆斯&quot;    }  }, &quot;sort&quot;: [   {     &quot;_id&quot;: {        &quot;order&quot;: &quot;desc&quot;    //降序  asc 升序     }   } ]}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="分页查询" tabindex="-1"><a class="header-anchor" href="#分页查询" aria-hidden="true">#</a> 分页查询</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET chen/user/_search{  &quot;query&quot;: {    &quot;match&quot;: {      &quot;name&quot;: &quot;詹姆斯&quot;    }  }, &quot;sort&quot;: [   {     &quot;_id&quot;: {       &quot;order&quot;: &quot;desc&quot;     }   }    ],  &quot;from&quot;: 0,    //从第0条数据开始  &quot;size&quot;: 1    //查询1条信息	}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>bool值进行多条件精确查询</p><h3 id="must命令-and-所有条件都要符合" tabindex="-1"><a class="header-anchor" href="#must命令-and-所有条件都要符合" aria-hidden="true">#</a> must命令（and) 所有条件都要符合</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET chen/user/_search{  &quot;query&quot;: {    &quot;bool&quot;:{      &quot;must&quot;: [        {          &quot;match&quot;: {            &quot;name&quot;: &quot;詹姆斯&quot;          }        },        {          &quot;match&quot;: {            &quot;desc&quot;: &quot;小皇帝&quot;          }        }      ]    }  }}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="should命令-or" tabindex="-1"><a class="header-anchor" href="#should命令-or" aria-hidden="true">#</a> should命令（or)</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET chen/user/_search{  &quot;query&quot;: {    &quot;bool&quot;:{      &quot;should&quot;: [        {          &quot;match&quot;: {            &quot;name&quot;: &quot;詹姆斯&quot;          }        },        {          &quot;match&quot;: {            &quot;desc&quot;: &quot;小皇帝&quot;          }        }      ]    }  }}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="must-not" tabindex="-1"><a class="header-anchor" href="#must-not" aria-hidden="true">#</a> must_not</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET chen/user/_search{  &quot;query&quot;: {    &quot;bool&quot;:{      &quot;must_not&quot;: [        {          &quot;match&quot;: {            &quot;name&quot;: &quot;詹姆斯&quot;          }        },        {          &quot;match&quot;: {            &quot;desc&quot;: &quot;小皇帝&quot;          }        }      ]    }  }}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="filter-使用filter进行数据过滤" tabindex="-1"><a class="header-anchor" href="#filter-使用filter进行数据过滤" aria-hidden="true">#</a> filter 使用filter进行数据过滤</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET chen/user/_search{  &quot;query&quot;: {    &quot;bool&quot;:{      &quot;must_not&quot;: [        {          &quot;match&quot;: {            &quot;name&quot;: &quot;詹姆斯&quot;          }        }      ],      &quot;filter&quot;: {        &quot;range&quot;: {          &quot;age&quot;: {            &quot;gte&quot;: 1,            &quot;lte&quot;: 3          }        }      }    }  }}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="匹配多个条件" tabindex="-1"><a class="header-anchor" href="#匹配多个条件" aria-hidden="true">#</a> 匹配多个条件</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET chen/user/_search{  &quot;query&quot;: {    &quot;match&quot;: {      &quot;tags&quot;: &quot;交友 运动&quot;    }  }}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="精确查询" tabindex="-1"><a class="header-anchor" href="#精确查询" aria-hidden="true">#</a> 精确查询</h3><p>term查询是直接通过倒排索引指定的词条进程精确查找</p><p>关于分词</p><ul><li>term ，直接查询精确的</li><li>match，会使用分词器解析!(先分析文档，然后在通过分析的文档进行查询!)</li></ul><p>keyword字段类型不会被分词器解析</p><h3 id="多个值匹配的精确查询" tabindex="-1"><a class="header-anchor" href="#多个值匹配的精确查询" aria-hidden="true">#</a> 多个值匹配的精确查询</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET testdb/_search{  &quot;query&quot;: {    &quot;bool&quot;: {      &quot;should&quot;: [        {          &quot;term&quot;: {              &quot;t1&quot;: &quot;22&quot;                     }        },{                            &quot;term&quot;: {                          &quot;t1&quot;: &quot;33&quot;                     }        }            ]    }  }}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="高亮查询" tabindex="-1"><a class="header-anchor" href="#高亮查询" aria-hidden="true">#</a> 高亮查询</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET chen/user/_search{  &quot;query&quot;: {    &quot;match&quot;: {      &quot;name&quot;: &quot;詹姆斯&quot;    }  },  &quot;highlight&quot;: {    &quot;fields&quot;: {      &quot;name&quot;:{}    }  }}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="自定义高亮条件" tabindex="-1"><a class="header-anchor" href="#自定义高亮条件" aria-hidden="true">#</a> 自定义高亮条件</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET chen/user/_search{  &quot;query&quot;: {    &quot;match&quot;: {      &quot;name&quot;: &quot;詹姆斯&quot;    }  },  &quot;highlight&quot;: {    &quot;pre_tags&quot;: &quot;&lt;p class=&#39;key&#39; style=&#39;color:red&#39;&gt;&quot;,     &quot;post_tags&quot;: &quot;&lt;/p&gt;&quot;,     &quot;fields&quot;: {      &quot;name&quot;:{}    }  }}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="springboot操作es" tabindex="-1"><a class="header-anchor" href="#springboot操作es" aria-hidden="true">#</a> Springboot操作es</h2><h3 id="修改es版本" tabindex="-1"><a class="header-anchor" href="#修改es版本" aria-hidden="true">#</a> 修改es版本</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> &lt;properties&gt;        &lt;java.version&gt;1.8&lt;/java.version&gt;        &lt;!--自定义版本--&gt;        &lt;elasticsearch.version&gt;7.6.1&lt;/elasticsearch.version&gt;    &lt;/properties&gt;    
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>需要导入的依赖</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&lt;dependencies&gt;        &lt;!--解析网页  爬电影 tika--&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.jsoup&lt;/groupId&gt;            &lt;artifactId&gt;jsoup&lt;/artifactId&gt;            &lt;version&gt;1.10.2&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;            &lt;artifactId&gt;fastjson&lt;/artifactId&gt;            &lt;version&gt;1.2.70&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;            &lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;            &lt;scope&gt;runtime&lt;/scope&gt;            &lt;optional&gt;true&lt;/optional&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;            &lt;optional&gt;true&lt;/optional&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;            &lt;artifactId&gt;lombok&lt;/artifactId&gt;            &lt;optional&gt;true&lt;/optional&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;            &lt;scope&gt;test&lt;/scope&gt;        &lt;/dependency&gt;    &lt;/dependencies&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="创建索引" tabindex="-1"><a class="header-anchor" href="#创建索引" aria-hidden="true">#</a> 创建索引</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> @Autowired    @Qualifier(&quot;restHighLevelClient&quot;)  //指定  高级客户端    private RestHighLevelClient client;   //测试索引的请求 Request    @Test    void testCreateIndex() throws IOException {        //创建索引请求        CreateIndexRequest request = new CreateIndexRequest(&quot;chen_index&quot;);        //执行创建请求  IndicesClient        CreateIndexResponse createIndexResponse = client.indices().create(request, RequestOptions.DEFAULT);        System.out.println(createIndexResponse);    }
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="获取索引-判断是否存在" tabindex="-1"><a class="header-anchor" href="#获取索引-判断是否存在" aria-hidden="true">#</a> 获取索引,判断是否存在</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> @Test    void testExistIndex() throws IOException {        GetIndexRequest request = new GetIndexRequest(&quot;chen_index&quot;);        boolean exists = client.indices().exists(request, RequestOptions.DEFAULT);        System.out.println(exists);    }
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="删除索引" tabindex="-1"><a class="header-anchor" href="#删除索引" aria-hidden="true">#</a> 删除索引</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>@Test    void testDeleteIndex() throws IOException {        DeleteIndexRequest request = new DeleteIndexRequest(&quot;chen_index&quot;);        AcknowledgedResponse delete = client.indices().delete(request, RequestOptions.DEFAULT);        System.out.println(delete);    }
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="添加文档" tabindex="-1"><a class="header-anchor" href="#添加文档" aria-hidden="true">#</a> 添加文档</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>@Test    void testAddDocument() throws IOException {        //创建对象        User user = new User(&quot;chen&quot;, 20);        //创建请求        IndexRequest request = new IndexRequest(&quot;chen_index&quot;);        //规则        request.id(&quot;1&quot;);        request.timeout(TimeValue.timeValueSeconds(1)); //延迟 超时        request.timeout(&quot;1s&quot;);        //将数据放入请求 json数据         request.source(JSON.toJSONString(user), XContentType.JSON);  //转换为json        //客户端发送请求        IndexResponse indexResponse = client.index(request, RequestOptions.DEFAULT);        System.out.println(indexResponse.toString());        System.out.println(indexResponse.status());    }
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="获取文档记录" tabindex="-1"><a class="header-anchor" href="#获取文档记录" aria-hidden="true">#</a> 获取文档记录</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>@Test    void testGetDocument() throws IOException {        GetRequest getRequest = new GetRequest(&quot;chen_index&quot;,&quot;1&quot;);        GetResponse getReponse = client.get(getRequest, RequestOptions.DEFAULT);        System.out.println(getReponse.getSourceAsString());        System.out.println(getReponse);    }
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="更新文档信息" tabindex="-1"><a class="header-anchor" href="#更新文档信息" aria-hidden="true">#</a> 更新文档信息</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>@Testvoid testUpdateDocument() throws IOException {    UpdateRequest updateRequest = new UpdateRequest(&quot;chen_index&quot;,&quot;1&quot;);   updateRequest.timeout(&quot;1s&quot;);    User user = new User(&quot;zhangsan&quot;, 23);    updateRequest.doc(JSON.toJSONString(user),XContentType.JSON);    UpdateResponse update = client.update(updateRequest, RequestOptions.DEFAULT);    System.out.println(update);    System.out.println(update.status());}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="删除文档记录" tabindex="-1"><a class="header-anchor" href="#删除文档记录" aria-hidden="true">#</a> 删除文档记录</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>void testDeleteDocument() throws IOException {       DeleteRequest request = new DeleteRequest(&quot;chen_index&quot;, &quot;1&quot;);       request.timeout(&quot;1s&quot;);       DeleteResponse delete = client.delete(request, RequestOptions.DEFAULT);       System.out.println(delete.status());   }
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="批量插入数据" tabindex="-1"><a class="header-anchor" href="#批量插入数据" aria-hidden="true">#</a> 批量插入数据</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>@Test    void tsetBulkRequest() throws IOException {        BulkRequest bulkRequest = new BulkRequest();        bulkRequest.timeout(&quot;10s&quot;);        ArrayList&lt;User&gt; userList = new ArrayList&lt;&gt;();        userList.add(new User(&quot;chen1&quot;, 18));        userList.add(new User(&quot;chen2&quot;, 18));        userList.add(new User(&quot;chen3&quot;, 18));        userList.add(new User(&quot;chen4&quot;, 18));        userList.add(new User(&quot;chen5&quot;, 18));        //批处理请求        for (int i = 0; i &lt; userList.size(); i++) {            bulkRequest.add(new IndexRequest(&quot;chen_index&quot;)                    .id(&quot;&quot; + (i + 1))                    .source(JSON.toJSONString(userList.get(i)), XContentType.JSON)            );        }        BulkResponse bulk = client.bulk(bulkRequest, RequestOptions.DEFAULT);        System.out.println(bulk.hasFailures());    }
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="搜索" tabindex="-1"><a class="header-anchor" href="#搜索" aria-hidden="true">#</a> 搜索</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> @Test    void testSearchRequest() throws IOException {        SearchRequest searchRequest=new SearchRequest(&quot;chen_index&quot;);        //构建搜索条件        SearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder();        TermQueryBuilder termQueryBuilder = QueryBuilders.termQuery(&quot;name&quot;, &quot;chen1&quot;);//匹配查询条件        //QueryBuilders.matchAllQuery();//查询所有        searchSourceBuilder.query(termQueryBuilder);        searchSourceBuilder.timeout(new TimeValue(60, TimeUnit.SECONDS));        //分页        /*searchSourceBuilder.from();        searchSourceBuilder.size();*/        searchRequest.source(searchSourceBuilder);        SearchResponse search = client.search(searchRequest, RequestOptions.DEFAULT);        System.out.println(JSON.toJSONString(search.getHits()));        for (SearchHit hit : search.getHits().getHits()) {            System.out.println(hit.getSourceAsMap());        }    }
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>SearchRequest搜索请求</li><li>SearchsourceBuilder条件构造</li><li>HighlightBuiLder构建高亮</li><li>TermQueryBuiLlder精确查询</li></ul><p>https://github.com/fanjianhai/CODE/tree/main/SpringBoot/springboot-11-elasticsearch-jd</p><p>爬取数据︰(获取请求返回的页面信息，筛选出我们想要的数据）</p><p>parse和stringfy区别</p><blockquote><p>**一：JSON.parse()【从一个字符串中解析出json对象】</p><p>**</p><p>例子：</p><p>//定义一个字符串</p><p>var data=&#39;{&quot;name&quot;:&quot;goatling&quot;}&#39;</p><p>//解析对象</p><p>JSON.parse(data)</p><p>结果是：</p><p>name:&quot;goatling&quot;</p><p><strong>二：JSON.stringify()【从一个对象中解析出字符串】</strong></p><p>var data={name:&#39;goatling&#39;}</p><p>JSON.stringify(data)</p><p>结果是：</p><p>&#39;{&quot;name&quot;:&quot;goatling&quot;}&#39;</p></blockquote><p>解析网页</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> String url = &quot;https://search.jd.com/Search?keyword=&quot;+&quot;keywords&quot;;        //解析网页        Document document = Jsoup.parse(new URL(url), 3000);  //就是返回的js页面对象        Element element = document.getElementById(&quot;J_goodsList&quot;);        //获取所有的li元素  标签        Elements elements = element.getElementsByTag(&quot;li&quot;);        //获取元素中的内容 el就是每一个li标签  attr获取属性  eq(0)获取第一个  text文档        for (Element el : elements) {            String img = el.getElementsByTag(&quot;img&quot;).eq(0).attr(&quot;data-lazy-img&quot;);            String price = el.getElementsByClass(&quot;p-price&quot;).eq(0).text();            String title = el.getElementsByClass(&quot;p-name&quot;).eq(0).text();            System.out.println(img);            System.out.println(price);            System.out.println(title);        }
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>axios通信</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> axios.get(xxx&quot;).then(response=&gt;{                                   });
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>contentService进行封装</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>package com.chen.service;import com.alibaba.fastjson.JSON;import com.chen.pojo.Content;import com.chen.utils.HtmlParseUtil;import org.elasticsearch.action.bulk.BulkRequest;import org.elasticsearch.action.bulk.BulkResponse;import org.elasticsearch.action.index.IndexRequest;import org.elasticsearch.action.search.SearchRequest;import org.elasticsearch.action.search.SearchResponse;import org.elasticsearch.client.RequestOptions;import org.elasticsearch.client.RestHighLevelClient;import org.elasticsearch.common.text.Text;import org.elasticsearch.common.unit.TimeValue;import org.elasticsearch.common.xcontent.XContentType;import org.elasticsearch.index.query.QueryBuilders;import org.elasticsearch.index.query.TermQueryBuilder;import org.elasticsearch.search.SearchHit;import org.elasticsearch.search.builder.SearchSourceBuilder;import org.elasticsearch.search.fetch.subphase.highlight.HighlightBuilder;import org.elasticsearch.search.fetch.subphase.highlight.HighlightField;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.factory.annotation.Qualifier;import org.springframework.stereotype.Service;import java.io.IOException;import java.util.ArrayList;import java.util.List;import java.util.Map;import java.util.concurrent.TimeUnit;@Service@SuppressWarnings(&quot;all&quot;)public class ContentService {    @Autowired    @Qualifier(&quot;restHighLevelClient&quot;)    private RestHighLevelClient client;    //解析数据放入es索引库中    public Boolean parseContent(String keywords) throws IOException {        List&lt;Content&gt; contents = new HtmlParseUtil().pareseJD(keywords);        //插入到es        BulkRequest bulkRequest = new BulkRequest();        bulkRequest.timeout(&quot;2m&quot;);        for (int i = 0; i &lt; contents.size(); i++) {            bulkRequest.add(new IndexRequest(&quot;jd_goods&quot;)                    .source(JSON.toJSONString(contents.get(i)), XContentType.JSON));        }        BulkResponse bulk = client.bulk(bulkRequest, RequestOptions.DEFAULT);        return !bulk.hasFailures();    }    //获取这些数据的搜索功能    public List&lt;Map&lt;String, Object&gt;&gt; searchPage(String keyword, int pageNo, int pageSize) throws IOException {        if (pageNo &lt;= 1) {            pageNo = 1;        }        //条件搜索        SearchRequest searchRequest = new SearchRequest(&quot;jd_goods&quot;);        SearchSourceBuilder sourceBuilder = new SearchSourceBuilder();        //分页        sourceBuilder.from(pageNo);        sourceBuilder.size(pageSize);        //精准匹配关键字        TermQueryBuilder termQueryBuilder = QueryBuilders.termQuery(&quot;title&quot;, keyword);        sourceBuilder.query(termQueryBuilder);        sourceBuilder.timeout(new TimeValue(60, TimeUnit.SECONDS));        //高亮        HighlightBuilder highlightBuilder = new HighlightBuilder();        highlightBuilder.requireFieldMatch(false);//关闭多个高亮显示        highlightBuilder.preTags(&quot;&lt;span style=&#39;color:red&#39;&gt;&quot;);        highlightBuilder.postTags(&quot;&lt;/span&gt;&quot;);        highlightBuilder.field(&quot;title&quot;);        sourceBuilder.highlighter(highlightBuilder);        //执行搜索        searchRequest.source(sourceBuilder);        SearchResponse searchResponse = client.search(searchRequest,       RequestOptions.DEFAULT);        //解析结果        ArrayList&lt;Map&lt;String, Object&gt;&gt; list = new ArrayList&lt;&gt;();        for (SearchHit hit : searchResponse.getHits().getHits()) {            //解析高亮字段 获取字段  将原来的字段换为我们高亮的字段            Map&lt;String, HighlightField&gt; highlightFields = hit.getHighlightFields();            HighlightField title = highlightFields.get(&quot;title&quot;);            Map&lt;String, Object&gt; sourceAsMap = hit.getSourceAsMap();            if (title != null) {                Text[] fragments = title.fragments();                String n_title = &quot;&quot;;                for (Text fragment : fragments) {                    n_title += fragment;                }                sourceAsMap.put(&quot;title&quot;,n_title);            }            list.add(hit.getSourceAsMap());        }        return list;    }}
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><!--]--></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/demo/src/zh/posts/article/article2.md" rel="noopener noreferrer" target="_blank" arialabel="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" arialabelledby="edit"><title id="edit" lang="en">edit icon</title><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><!----><!----></footer><nav class="page-nav"><a href="/zh/posts/article/article1.html" class="nav-link prev" arialabel="Docker学习"><div class="hint"><span class="arrow left"></span>上一页</div><div class="link"><i class="icon iconfont icon-edit"></i>Docker学习</div></a><a href="/zh/posts/article/article3.html" class="nav-link next" arialabel="Redis"><div class="hint">下一页<span class="arrow right"></span></div><div class="link">Redis<i class="icon iconfont icon-edit"></i></div></a></nav><div class="giscus-wrapper input-top" style="display:block;"><!----></div><!----></main><!--]--><footer class="footer-wrapper"><div class="footer">联系我们</div><div class="copyright">Copyright © 2022 小陈博客</div></footer></div><!--]--><!----><!--[--><!-- Root element of PhotoSwipe. Must have class pswp. --><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><!-- Background of PhotoSwipe. 
    It’s a separate element, as animating opacity is faster than rgba().--><div class="pswp__bg"></div><!-- Slides wrapper with overflow:hidden. --><div class="pswp__scroll-wrap"><!-- Container that holds slides. PhotoSwipe keeps only 3 slides in DOM to save memory. --><div class="pswp__container"><!-- don’t modify these 3 pswp__item elements, data is added later on --><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. --><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><!--  Controls are self-explanatory. Order can be changed. --><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="关闭"></button><button class="pswp__button pswp__button--share" title="分享"></button><button class="pswp__button pswp__button--fs" title="切换全屏"></button><button class="pswp__button pswp__button--zoom" title="缩放"></button><!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR --><!-- element will get class pswp__preloader--active when preloader is running --><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="上一个 (左箭头)"></button><button class="pswp__button pswp__button--arrow--right" title="下一个 (右箭头)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><!--]--><!--]--></div>
    <script type="module" src="/assets/app.276e6fe4.js" defer></script>
  </body>
</html>
